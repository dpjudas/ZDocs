<page xmlns="http://www.mediawiki.org/xml/export-0.11/">
  <title>ZDRay</title>
  <ns>0</ns>
  <id>9336</id>
  <revision>
    <id>54099</id>
    <parentid>48792</parentid>
    <timestamp>2024-12-27T17:02:06Z</timestamp>
    <contributor>
      <username>Redneckerz</username>
      <id>2602</id>
    </contributor>
    <minor />
    <comment>Minor inclusion that ZDRay is deprecated.</comment>
    <origin>54099</origin>
    <model>wikitext</model>
    <format>text/x-wiki</format>
    <text bytes="3735" sha1="0hdss7um407hxpwkzlztu8c8f4p9t87" xml:space="preserve">{| align=center border=0 cellpadding=4 cellspacing=4 style="border: solid 1px #a3bfb1; background-color: #cef2e0; padding: 0.4em 1em; width: 55%; margin: 1em auto; text-align: center;"
|-
| [[File:Graficon.gif|link=]]
| '''Warning:''' This feature is [[GZDoom]] specific, and is not compatible with [[ZDoom]]!&lt;br&gt;&lt;font size=1&gt;''To see all of GZDoom's specific features, see [[:Category:GZDoom features|GZDoom features]].''&lt;/font&gt;
|}
{{Doomwiki}}
'''ZDRay''' was a experimental lightmap compilation utility and [[node builder]] by [[Magnus Norddahl (dpJudas)]]. It was based on [[ZDBSP]] for the node generation and a lightmap compiler called [[DLight]]. It allows {{wp|Lightmap|lightmaps}} and shadows to be baked in a [[WAD]] file. Unlike [[dynamic light]] however, baked lights generated by ZDRay are static, but they can have multiple bounces and support surface based area lights.

It was further originally included to be used alongside the VKDoom source port, but ZDRay as of 2024 has been deprecated, with VKDoom being able to bake lightmaps on its own. 

==History==
The utility combines ZDBSP and a modified DLight lightmap compiler, which was used in [[Doom64 EX]] and [[Strife: Veteran Edition]]. The utility was abandoned when issues arose regarding the lighting of sprites along with supporting all the slope variations that [[ZDoom]] allows, which was requested by [[Graf Zahl]]. 

A compiled version of the tool exists, along with a custom [[GZDoom]] build that supports ZDRay. The supplied build of GZDoom carries version number {{c|g3.8pre-49-gd95967f2c}} or 3.7.9999.0, dated December 30, 2018. It is a development build towards version 3.8.0 and should be compatible with GZDoom version 3.7.0.

===2021 updates===
As part of wanting to enhance his game ElderJam, [[Nash Muhandes]] and [[Magnus Norddahl (dpJudas)]] started working on ZDRay again, enhancing it further to test if integration in GZDoom and Ultimate Doom Builder is possible. A new experimental build was produced, dated October 3, 2021 carrying version number {{c|g4.8pre-25-g247deff5b}} or 4.7.9999.0.

==Usage==
In order to use ZDRay, you make your map in the GZDoom Builder-Bugfix variant of [[Doom Builder 2]], although Ultimate Doom Builder may also work. ZDRay picks up certain [[UDMF]] properties from the map itself and sunlight properties from [[MAPINFO]]. In order to get baked lights, you will have to place them in your level first. You either set your lights in Doom Builder to ''static'', or you tag surfaces (sectores or lines; UDMF only) to be light emitters.  

A possible workflow is to place dynamic lights first, and then convert these lights over to UDMF static lights, which you will have to do by hand.

Several restrictions are in play: Not all ZDoom slopes are supported, and sprites may not get correctly lit. A lightconfig.txt file needs to be created prior to using ZDRay. It can be empty, but you must at least insert 1 line. 

Lastly, baking lightmaps and shadows is a costly CPU-intensive process. If you have a complex map with hundreds of static lights, expect compilation time to be significant. Since ZDRay uses the CPU to calculate the lightmaps, dedicating more CPU cores to the baking process will decrease the compilation time.

==External links==
*[https://zdoom.org/files/zdray/GZDoom-ZDRay.7z Custom GZDoom build, includes ZDRay and lit test WAD], hosted by ZDoom.org 
*[https://zdoom.org/files/zdray/ZDRay.7z Compiled ZDRay executable, includes unlit test WAD], hosted by ZDoom.org
*[https://zdoom.org/files/zdray/README.txt README file with a description of the above two files], hosted by ZDoom.org
*[https://github.com/dpjudas/ZDRay ZDRay source code], at GitHub

[[Category:Software]]
[[Category:GZDoom]]</text>
    <sha1>0hdss7um407hxpwkzlztu8c8f4p9t87</sha1>
  </revision>
</page>